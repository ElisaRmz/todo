<h1>Tus Proyectos</h1>

<%= render 'projects/form' %>

<% @projects.sort_by{ |project| project.name }.each do |project| %>
  <%= link_to project.name, project_path(project) %> <%= project.unfinished_tasks.count %> ; <%= project.project_percentage %> ·
<% end %>

<h1>Tus tareas => Hoy: <%=Date.current.strftime('%d/%m/%Y')%></h1>

<p style="color:red;"> Que salgan las tareas ordenadas por vencimiento, sort_by sirve cuando todos los campos están completos </p>
<p style="color:red;"> Asignar un color a cada proyecto y que lo muestre en la tabla </p>
<p style="color:red;"> Añadir imágenes de las acciones que necesito </p>
<p style="color:red;"> Desactivar una acción hasta que termine una anterior, relacionar tareas </p>

<%= render 'tasks/form' %>

<%= link_to 'Todas', "#{root_path}?filter=all" %> -
<%= link_to 'Terminadas', "#{root_path}?filter=done" %> -
<%= link_to 'Para hacer', root_path %>

<table>

  <tr>
    <th><%= 'Vencimiento' %></th>
    <th><%= 'Frecuencia' %></th>
    <th><%= 'Necesito' %></th>
    <th><%= 'Proyecto' %></th>
    <th><%= 'Tarea' %></th>
    <th><%= 'Notas' %></th>
    <th><%= 'Completado' %></th>
  </tr>

  <% @tasks.sort_by(&:requirement).each do |task| %>
    <tr>
      <td style= <%= coloring_date(task.expiration, task.finish) %> ><%= task.expiration&.strftime('%d/%m/%Y') %></td>
      <td style= <%= grey_finish_task(task.finish) %> ><%= task.frecuency %></td>
      <td style= <%= grey_finish_task(task.finish) %> ><%= task.requirement %></td>
      <td style= <%= grey_finish_task(task.finish) %> ><%= task.project&.name %></td>
      <td style= <%= grey_finish_task(task.finish) %> ><%= link_to task.name, edit_task_path(task) %></td>
      <td style= <%= grey_finish_task(task.finish) %> ><%= task.note %></td> 
      <td><%= task.finish %></td>      
    </tr> 
  <% end %>

</table>



